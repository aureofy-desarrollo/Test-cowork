<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Reporte de Tarjeta de Miembro -->
    <record id="action_report_member_card" model="ir.actions.report">
        <field name="name">Tarjeta de Miembro</field>
        <field name="model">cowork.membership</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">aureofy_cowork_ll.report_member_card_document</field>
        <field name="report_file">aureofy_cowork_ll.report_member_card_document</field>
        <field name="print_report_name">'TarjetaMiembro-%s' % object.name</field>
        <field name="binding_model_id" ref="model_cowork_membership"/>
        <field name="binding_type">report</field>
        <field name="paperformat_id" ref="base.paperformat_us_ledger"/>
    </record>

    <!-- Template de la Tarjeta -->
    <template id="report_member_card_document">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <div class="page" style="padding: 20px;">
                    <div style="width: 350px; height: 220px; border: 2px solid #333; border-radius: 15px; 
                                padding: 15px; margin: 10px auto; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        <div style="display: flex; align-items: flex-start;">
                            <!-- Foto del miembro -->
                            <div style="width: 80px; height: 100px; background: white; border-radius: 8px; 
                                        overflow: hidden; flex-shrink: 0;">
                                <t t-if="o.partner_id.image_128">
                                    <img t-att-src="image_data_uri(o.partner_id.image_128)" 
                                         style="width: 100%; height: 100%; object-fit: cover;"/>
                                </t>
                                <t t-else="">
                                    <div style="width: 100%; height: 100%; display: flex; align-items: center; 
                                                justify-content: center; font-size: 40px; color: #ccc;">
                                        <i class="fa fa-user"/>
                                    </div>
                                </t>
                            </div>
                            <!-- Información del miembro -->
                            <div style="margin-left: 15px; color: white;">
                                <h4 style="margin: 0; font-size: 16px; font-weight: bold;">
                                    <t t-esc="o.partner_id.name"/>
                                </h4>
                                <p style="margin: 5px 0; font-size: 12px;">
                                    <t t-esc="o.name"/>
                                </p>
                                <p style="margin: 5px 0; font-size: 11px;">
                                    <t t-esc="o.plan_id.name"/>
                                </p>
                                <p style="margin: 5px 0; font-size: 10px;">
                                    Válido hasta: <t t-esc="o.date_end"/>
                                </p>
                            </div>
                        </div>
                        <!-- Información adicional -->
                        <div style="margin-top: 15px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.3);">
                            <div style="display: flex; justify-content: space-between; color: white; font-size: 10px;">
                                <span>Email: <t t-esc="o.partner_id.email"/></span>
                                <span>Tel: <t t-esc="o.partner_id.phone"/></span>
                            </div>
                            <div style="display: flex; justify-content: space-between; color: white; font-size: 11px; margin-top: 10px;">
                                <span><strong>Créditos:</strong> <t t-esc="o.credits_remaining"/></span>
                                <span style="font-weight: bold;"><t t-esc="o.company_id.name"/></span>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>
</odoo>
